
![Coverage](https://img.shields.io/badge/Coverage-21.1%25-red)
<!-- TOC -->
* [Overview](#overview)
  * [Requirements](#requirements)
  * [Installation](#installation)
  * [Example](#example)
* [pocketbase\_plugin\_ngrok](#pocketbasepluginngrok)
  * [Index](#index)
  * [type Options](#type-options)
  * [type Plugin](#type-plugin)
    * [func MustRegister](#func-mustregister)
    * [func Register](#func-register)
    * [func \(\*Plugin\) Validate](#func-plugin-validate)
* [Contributing](#contributing)
  * [Process](#process)
  * [Development setup](#development-setup)
  * [Testing](#testing)
  * [Linting](#linting)
  * [Docs update in README](#docs-update-in-readme)
<!-- TOC -->

# Overview

This plugin allow expose local [Pocketbase](https://github.com/pocketbase/pocketbase) with [ngrok](https://ngrok.com/)

This plugin can be used for development purposes, when you need to expose your local Pocketbase instance to the internet. For example, you can use it to test your Pocketbase app on mobile device.

## Requirements

- Go 1.18+
- [Pocketbase](https://github.com/pocketbase/pocketbase) 0.13+

## Installation

```bash
go get github.com/iamelevich/pocketbase-plugin-ngrok
```

## Example

You can check examples in [examples folder](/examples)

```go
package main

import (
	"context"
	ngrokPlugin "github.com/iamelevich/pocketbase-plugin-ngrok"
	"log"

	"github.com/pocketbase/pocketbase"
)

func main() {
	app := pocketbase.New()

	// Setup ngrok
	ngrokPlugin.MustRegister(app, &ngrokPlugin.Options{
		Ctx:       context.Background(),
		Enabled:   true,
		AuthToken: "YOUR_NGROK_AUTH_TOKEN", // Better to use ENV variable for that
	})

	if err := app.Start(); err != nil {
		log.Fatal(err)
	}
}
```

<!-- gomarkdoc:embed:start -->

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# pocketbase\_plugin\_ngrok

```go
import "github.com/iamelevich/pocketbase-plugin-ngrok"
```

## Index

- [type Options](<#type-options>)
- [type Plugin](<#type-plugin>)
  - [func MustRegister(app core.App, options *Options) *Plugin](<#func-mustregister>)
  - [func Register(app core.App, options *Options) (*Plugin, error)](<#func-register>)
  - [func (p *Plugin) Validate() error](<#func-plugin-validate>)


## type Options

Options defines optional struct to customize the default plugin behavior.

```go
type Options struct {
    // Ctx is a context that will be used to start ngrok tunnel.
    Ctx context.Context

    // Enabled defines if ngrok tunnel should be started.
    Enabled bool

    // AuthToken is your ngrok auth token. You can get it from https://dashboard.ngrok.com/auth
    AuthToken string

    // AfterSetup is a callback function that will be called after ngrok tunnel is started.
    AfterSetup func(url string) error
}
```

## type Plugin

```go
type Plugin struct {
    // contains filtered or unexported fields
}
```

### func MustRegister

```go
func MustRegister(app core.App, options *Options) *Plugin
```

MustRegister is a helper function that registers plugin and panics if error occurred.

### func Register

```go
func Register(app core.App, options *Options) (*Plugin, error)
```

Register registers plugin.

### func \(\*Plugin\) Validate

```go
func (p *Plugin) Validate() error
```

Validate plugin options. Return error if some option is invalid.



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)


<!-- gomarkdoc:embed:end -->

# Contributing

This pocketbase plugin is free and open source project licensed under the [MIT License](LICENSE.md).
You are free to do whatever you want with it, even offering it as a paid service.

## Process

- Fork the repo
- Create a new branch
- Make your changes
- Create a pull request
- Wait for review
- Make changes if needed
- Merge
- Celebrate :)

## Development setup

- Install [asdf](https://asdf-vm.com/#/core-manage-asdf-vm) and plugins for tools listed in [.tool-versions](.tool-versions) file.
- This repo also uses [asdf-direnv](https://github.com/asdf-community/asdf-direnv). Install it and run `direnv allow` in the repo root.
- Setup `pre-commit` hooks with `pre-commit install -t commit-msg -t pre-commit`

## Testing

- Run `make test` to run tests
- Run `make test-coverage` to run tests with coverage report

## Linting

- Run `make lint` to run linters

## Docs update in README

- Install [gomarkdoc](https://github.com/princjef/gomarkdoc)
- Run `make docs` to update docs in README